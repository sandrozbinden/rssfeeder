package com.sandrozbindne.rss;

import static org.junit.Assert.assertEquals;

import java.text.SimpleDateFormat;

import org.junit.Test;

import com.sandrozbinden.rss.Feed;
import com.sandrozbinden.rss.FeedParser;

public class FeedParserTest {

    @Test
    public void metaDataTest() {
        Feed feed = new FeedParser().parse("id|newspaper|language|title|link|2015-03-31 05:38:45|text|parsed title|parsed text");
        assertEquals("id", feed.getId());
        assertEquals("newspaper", feed.getNewspaper());
        assertEquals("language", feed.getLanguage());
        assertEquals("title", feed.getTitle());
        assertEquals("link", feed.getLink());
        assertEquals("text", feed.getText());
        assertEquals("2015-03-31 05:38:45", new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(feed.getPublishingDate()));
    }

    @Test
    public void realLiveDataTest() {
        new FeedParser()
                .parse("40393005b3ba751ae17d260fcde95791|SUN DAILY|ENGLISH|Lisbon, Luxembourg rank Europe's worst for pollution fight|http://www.thesundaily.my/news/1370235|2015-03-31 05:38:45| \"BRUSSELS: Lisbon and Luxembourg rank last in a test of how hard European cities are fighting air pollution, while Zurich and Copenhagen come top, an environmental group said Tuesday.\n\nDublin, Glasgow, Madrid and Rome also fared badly in the test of 23 mainly western European cities carried out by Friends of the Earth Germany.\n\n \"Lisbon and Luxembourg finish in the last bottom two places for tackling air pollution in only a half-hearted manner,\n the group said.\n\nThey had done the least to reduce pollution, ban heavy polluters from the roads, introduce clean buses and other forms of public transport, offer economic incentives, promote public transport as well as encourage walking and cycling, it said.\n\nThe gap with the top ranking cities was wide, the group said.\n\n\nBoth in Zurich and in the runner-up city, Copenhagen, the number of cars has been substantially reduced and there are restrictions on highly-polluting vehicles such as diesel cars, trucks and construction machines,\n it said.\n\nThe study, based on the US school grading system, gave the Swiss city a \nB plus\n rating while the Danish capital and the Austrian capital Vienna both got Bs.\n\nStockholm got a B minus, Berlin got a C, while Helsinki, London, Paris and the German city of Stuttgart got C minus scores.\n\nAmsterdam in the Netherlands and the Austrian city of Graz were graded D plus. The German city of Duesseldorf, the French city of Lyon, and Brussels were ranked D.\n\nSpanish city Barcelona, Italian industrial hub Milan and the Czech capital Prague all got D minus grades.\n\nDublin, Madrid, Rome and the Scottish city of Glasgow were all given F grades, but were still deemed to be doing slightly better than Portugal's Lisbon and the tiny duchy of Luxembourg.\n\nThe study was backed by the European Environmental Bureau, a coalition of grassroots environmental organisations. \u2013 AFP\"|[\"Lisbon\", \",\", \"Luxembourg\", \"rank\", \"Europe\", \"'\", \"s\", \"worst\", \"for\", \"pollution\", \"fight\"]|[\"BRUSSELS\", \":\", \"Lisbon\", \"and\", \"Luxembourg\", \"rank\", \"last\", \"in\", \"a\", \"test\", \"of\", \"how\", \"hard\", \"European\", \"cities\", \"are\", \"fighting\", \"air\", \"pollution\", \",\", \"while\", \"Zurich\", \"and\", \"Copenhagen\", \"come\", \"top\", \",\", \"an\", \"environmental\", \"group\", \"said\", \"Tuesday\", \".\", \"Dublin\", \",\", \"Glasgow\", \",\", \"Madrid\", \"and\", \"Rome\", \"also\", \"fared\", \"badly\", \"in\", \"the\", \"test\", \"of\", \"23\", \"mainly\", \"western\", \"European\", \"cities\", \"carried\", \"out\", \"by\", \"Friends\", \"of\", \"the\", \"Earth\", \"Germany\", \".\", \"\n\", \"Lisbon\", \"and\", \"Luxembourg\", \"finish\", \"in\", \"the\", \"last\", \"bottom\", \"two\", \"places\", \"for\", \"tackling\", \"air\", \"pollution\", \"in\", \"only\", \"a\", \"half\", \"-\", \"hearted\", \"manner\", \",\n\", \"the\", \"group\", \"said\", \".\", \"They\", \"had\", \"done\", \"the\", \"least\", \"to\", \"reduce\", \"pollution\", \",\", \"ban\", \"heavy\", \"polluters\", \"from\", \"the\", \"roads\", \",\", \"introduce\", \"clean\", \"buses\", \"and\", \"other\", \"forms\", \"of\", \"public\", \"transport\", \",\", \"offer\", \"economic\", \"incentives\", \",\", \"promote\", \"public\", \"transport\", \"as\", \"well\", \"as\", \"encourage\", \"walking\", \"and\", \"cycling\", \",\", \"it\", \"said\", \".\", \"The\", \"gap\", \"with\", \"the\", \"top\", \"ranking\", \"cities\", \"was\", \"wide\", \",\", \"the\", \"group\", \"said\", \".\", \"\n\", \"Both\", \"in\", \"Zurich\", \"and\", \"in\", \"the\", \"runner\", \"-\", \"up\", \"city\", \",\", \"Copenhagen\", \",\", \"the\", \"number\", \"of\", \"cars\", \"has\", \"been\", \"substantially\", \"reduced\", \"and\", \"there\", \"are\", \"restrictions\", \"on\", \"highly\", \"-\", \"polluting\", \"vehicles\", \"such\", \"as\", \"diesel\", \"cars\", \",\", \"trucks\", \"and\", \"construction\", \"machines\", \",\n\", \"it\", \"said\", \".\", \"The\", \"study\", \",\", \"based\", \"on\", \"the\", \"US\", \"school\", \"grading\", \"system\", \",\", \"gave\", \"the\", \"Swiss\", \"city\", \"a\", \"\n\", \"B\", \"plus\", \"\n\", \"rating\", \"while\", \"the\", \"Danish\", \"capital\", \"and\", \"the\", \"Austrian\", \"capital\", \"Vienna\", \"both\", \"got\", \"Bs\", \".\", \"Stockholm\", \"got\", \"a\", \"B\", \"minus\", \",\", \"Berlin\", \"got\", \"a\", \"C\", \",\", \"while\", \"Helsinki\", \",\", \"London\", \",\", \"Paris\", \"and\", \"the\", \"German\", \"city\", \"of\", \"Stuttgart\", \"got\", \"C\", \"minus\", \"scores\", \".\", \"Amsterdam\", \"in\", \"the\", \"Netherlands\", \"and\", \"the\", \"Austrian\", \"city\", \"of\", \"Graz\", \"were\", \"graded\", \"D\", \"plus\", \".\", \"The\", \"German\", \"city\", \"of\", \"Duesseldorf\", \",\", \"the\", \"French\", \"city\", \"of\", \"Lyon\", \",\", \"and\", \"Brussels\", \"were\", \"ranked\", \"D\", \".\", \"Spanish\", \"city\", \"Barcelona\", \",\", \"Italian\", \"industrial\", \"hub\", \"Milan\", \"and\", \"the\", \"Czech\", \"capital\", \"Prague\", \"all\", \"got\", \"D\", \"minus\", \"grades\", \".\", \"Dublin\", \",\", \"Madrid\", \",\", \"Rome\", \"and\", \"the\", \"Scottish\", \"city\", \"of\", \"Glasgow\", \"were\", \"all\", \"given\", \"F\", \"grades\", \",\", \"but\", \"were\", \"still\", \"deemed\", \"to\", \"be\", \"doing\", \"slightly\", \"better\", \"than\", \"Portugal\", \"'\", \"s\", \"Lisbon\", \"and\", \"the\", \"tiny\", \"duchy\", \"of\", \"Luxembourg\", \".\", \"The\", \"study\", \"was\", \"backed\", \"by\", \"the\", \"European\", \"Environmental\", \"Bureau\", \",\", \"a\", \"coalition\", \"of\", \"grassroots\", \"environmental\", \"organisations\", \".\", \"\u2013\", \"AFP\"]\"");
    }
}
